<!doctype html>
<html lang="ko">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <link rel="shortcut icon" type="image/png" href="/images/favicon.ico">
    
    <title>全域執行環境和全域物件 | apeiros0 Blog</title>
    
    <link rel="stylesheet" href="/css/style.css">
    
    <link rel="stylesheet" href="/libs/fancybox/jquery.fancybox.css" charset="utf-8">
    
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body class="site">
    <header class="site-header">
        <h1 class="site-title"><a href="/">apeiros0 Blog</a></h1>
        <nav class="site-nav">
            <ul class="nav">
                
                <li><a href="/archives">Archives</a></li>
                
                
                <li><a class="toggle-search" href="#search">search</a></li>
            </ul>
        </nav>
        <div class="site-search" id="search">
            <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><input type="hidden" name="sitesearch" value="https://apeiros0.github.io"></form>
        </div>
        
            <div class="site-header-background" style="background-image:url(http://reumia.github.io/hexo-theme-zzoman2015/images/background-zzoman2015.jpg)"></div>
        
    </header>
    <div class="site-body">
        <div class="global-width">
    <article class="article" data-layout="post" data-slug="global_environment&amp;object">
        <div class="article-content">
            
            
            <header class="article-header">
                <div class="article-meta">
                    <a href="/JavaScript/2019/10/07/global_environment&object/" class="article-date">
  <time datetime="2019-10-06T16:00:00.000Z">2019-10-07</time>
</a>
                    
  <div class="article-category categories">
    <a class="category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

                    
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/克服-JavaScript-奇怪部分筆記/">克服 JavaScript 奇怪部分筆記</a></li></ul>

                </div>
                
    <h1 class="article-title" itemprop="name">
      <a href="/JavaScript/2019/10/07/global_environment&object/">全域執行環境和全域物件</a>
    </h1>

            </header>
            
            <div class="article-body">
                <p>關於執行環境我們在之前已經有一小部分的認識，今天要來了解執行環境中的全域執行環境及其所建立的全域物件。</p>
<p>在開始了解全域執行環境及全域物件時，我們先來了解什麼是全域? </p>
<h2 id="什麼是全域-Global"><a href="#什麼是全域-Global" class="headerlink" title="什麼是全域 (Global) ?"></a>什麼是全域 (Global) ?</h2><p>這裡的全域 (Global)，指的是<strong>可以在任何地方取用它</strong>的意思，更簡單的說，如果<strong>不在 function 的範圍中那就是指全域</strong>。</p>
<p>舉例來說：<br>在下方的程式碼中，變數 b 在 function a 中，所以變數 b 不是全域，而 function a 就是在全域中。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> b = <span class="string">"local"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>反之，變數 b 在 function a 外，所以變數 b 是全域，function a 也同樣在全域中。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b = <span class="string">"global"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="全域執行環境-Global-Execution-Context"><a href="#全域執行環境-Global-Execution-Context" class="headerlink" title="全域執行環境 (Global Execution Context)"></a>全域執行環境 (Global Execution Context)</h2><p>又稱 基礎執行環境 (base execution context) 會在每次 JavaScript 程式執行時產生，它會自動生成 <strong>全域物件 (Global Object)</strong> 和 <strong>this 變數</strong>給你，而你的程式會被包在全域執行環境中。</p>
<h2 id="全域物件-Global-Object"><a href="#全域物件-Global-Object" class="headerlink" title="全域物件 (Global Object)"></a>全域物件 (Global Object)</h2><p>現在打開瀏覽器的開發者工具 (按下 <code>F12</code> 或是 <code>Ctrl + Shift + i</code>)，點擊 Console 視窗，觀察全域執行環境裡有什麼，剛剛有提到全域執行環境會生成全域物件和 this 變數，先輸入 <code>this</code>，會發現一個名為 Window 的物件，如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Window &#123;<span class="attr">parent</span>: Window, <span class="attr">postMessage</span>: ƒ, <span class="attr">blur</span>: ƒ, <span class="attr">focus</span>: ƒ, <span class="attr">close</span>: ƒ, …&#125;</span><br></pre></td></tr></table></figure>

<p>由於這是在瀏覽器執行 JavaScript，所以這個 Window 物件指的是瀏覽器的視窗，有趣的是，當我輸入 <code>window</code> 時，也會出現一樣的結果。</p>
<p>那麼，這個 Window 物件是什麼呢?</p>
<blockquote>
<p>Window 物件是<strong>瀏覽器的全域物件 (Global Object)</strong>，在 JavaScript 執行時，永遠只會有一個全域物件。</p>
</blockquote>
<ul>
<li><p>補充：如果在伺服器上執行 node.js (JavaScript 的伺服器) 的話，這個全域物件指的將不是 Window 物件，而是名為 Global 的物件。</p>
</li>
<li><p>補充：如果我在瀏覽器開啟新的分頁，那便會產生新的全域物件，也就是說，每個分頁的全域物件都是獨立的，都擁有屬於自己的全域執行環境。</p>
</li>
</ul>
<hr>
<p>現在我們認識到全域執行環境會建立全域物件 (Window 物件)，只要是在全域執行環境內，任何程式都能取用，同時，全域執行環境還建立了 this 變數，<strong>在全域 (Global Level) 中，this 變數等同於全域物件 (Window 物件)</strong>。</p>
<p>現在來透過程式更加了解全域物件，<br>在這個的例子中，提到 function a 和 變數 b 都是在全域中，這是因為 JavaScript 在執行時，我建立的變數 b 和 function a 不在 function 裡面，他們便會和全域物件連結在一起，</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b = <span class="string">"global"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>所以，當我在 Console 視窗輸入 <code>b</code> 的話，會顯示 <code>&quot;global&quot;</code>，而我再輸入 <code>window.b</code> 也同樣會顯示 <code>&quot;global&quot;</code>，因為變數 b 被加入到全域物件中。</p>
<hr>
<h2 id="總結"><a href="#總結" class="headerlink" title="總結"></a>總結</h2><p>當 JavaScript 程式執行時，會建立全域執行環境，其中包括：</p>
<ul>
<li><strong>全域物件</strong> (Global Object，由 JavaScript 建立，是執行環境的一部份，如果程式碼不在 function 內，那就是在全域物件中)</li>
<li><strong>this 變數</strong> (在全域執行環境中，this 等於全域物件)</li>
<li><strong>外部環境</strong> (Outer Environment，後面便會看到，在執行 function 時相當重要)</li>
<li><strong>你的程式碼</strong></li>
</ul>

            </div>
        </div>
    </article>

    
    
<nav class="article-nav">
  
    <a href="/JavaScript/2019/10/08/creation_and_hoisiting/" id="article-nav-newer" class="article-nav-link-wrap prev">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          創造和提升 (Hoisiting)
        
      </div>
    </a>
  
  
    <a href="/JavaScript/2019/10/06/name_value_pairs_and_object/" id="article-nav-older" class="article-nav-link-wrap next">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Name/Value 配對和物件</div>
    </a>
  
</nav>

    

    
    <section id="comments" class="article-comments">
        <div id="disqus_thread"></div>
        <script>
        
        /**
        *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
        *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
        /*
        var disqus_config = function () {
        this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
        };
        */
        (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = 'https://https-apeiros0-github-io.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
        })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </section>
    
</div>
    </div>
    <footer class="site-footer">
        <div class="global-width">
            <ul class="site-widget">
                
                <li class="widget widget-tag">
                    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget-body">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/克服-JavaScript-奇怪部分筆記/">克服 JavaScript 奇怪部分筆記</a><span class="tag-list-count">4</span></li></ul>
    </div>
  </div>

                </li>
                
                <li class="widget widget-category">
                    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a><span class="category-list-count">4</span></li></ul>
    </div>
  </div>

                </li>
                
                <li class="widget widget-recent_posts">
                    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget-body">
      <ul>
        
          <li>
            <a href="/JavaScript/2019/10/08/creation_and_hoisiting/">創造和提升 (Hoisiting)</a>
          </li>
        
          <li>
            <a href="/JavaScript/2019/10/07/global_environment&object/">全域執行環境和全域物件</a>
          </li>
        
          <li>
            <a href="/JavaScript/2019/10/06/name_value_pairs_and_object/">Name/Value 配對和物件</a>
          </li>
        
          <li>
            <a href="/JavaScript/2019/10/04/execution&lexical-environment/">語法解析器、執行環境與詞彙環境</a>
          </li>
        
      </ul>
    </div>
  </div>

                </li>
                
            </ul>
        </div>
        <div class="site-info">
            <address>
                &copy; 2019 <a href="https://apeiros0.github.io">apeiros0 Blog</a> All Right Reserved. <br>
                Powered by <a href="http://hexo.io">Hexo</a>. Theme by <a href="http://zzoman.com">ZZOMAN</a>
            </address>
        </div>
    </footer>
    
    <script src="/libs/jquery-1.11.3.min.js" type="text/javascript"></script>
    
    <script src="/libs/fancybox/jquery.fancybox.js" type="text/javascript"></script>
    
    <script src="/js/site_init.js" type="text/javascript"></script>
    <!--  -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-149403450-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-149403450-1');
    </script>
    
</body>
</html>